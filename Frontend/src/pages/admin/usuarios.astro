---
import Layout from '../../layouts/Layout.astro';
import AdminUserPanel from '../../components/react/admin/AdminUserPanel.tsx';
import { getAuthenticatedUser } from '../../lib/auth';

// --- GUARDIA DE SEGURIDAD ---
const user = getAuthenticatedUser(Astro.cookies);
if (!user || user.role !== 'admin') {
  return Astro.redirect('/login');
}
// --- FIN DEL GUARDIA ---
---

<Layout title="Admin - Usuarios">
  <main class="container" style="padding-top: 2rem; padding-bottom: 2rem;">
    <a
      href="/admin"
      style="display: inline-block; margin-bottom: 2rem; color: black; background-color: #e0e0e0; padding: 0.5rem 1rem; border-radius: 6px; text-decoration: none; font-weight: 500;"
    >
      &larr; Volver al Panel Principal
    </a>
    <AdminUserPanel client:load />
  </main>
</Layout>
