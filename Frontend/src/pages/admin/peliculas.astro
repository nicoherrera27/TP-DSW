---
import Layout from '../../layouts/Layout.astro';
import AdminMoviePanel from '../../components/react/admin/AdminMoviePanel.tsx';
import { getAuthenticatedUser } from '../../lib/auth';

const user = getAuthenticatedUser(Astro.cookies);
if (!user || user.role !== 'admin') {
  return Astro.redirect('/login');
}
---

<Layout title="Admin - Movie Management">
  <main class="container" style="padding-top: 2rem; padding-bottom: 2rem;">
    <a
      href="/admin"
      style="display: inline-block; margin-bottom: 2rem; color: black; background-color: #e0e0e0; padding: 0.5rem 1rem; border-radius: 6px; text-decoration: none; font-weight: 500;"
    >
      &larr; Back to Admin Panel
    </a>
    <AdminMoviePanel client:load />
  </main>
</Layout>
