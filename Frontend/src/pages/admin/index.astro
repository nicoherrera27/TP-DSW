---
import Layout from '../../layouts/Layout.astro';
import { getAuthenticatedUser } from '../../lib/auth';

const user = getAuthenticatedUser(Astro.cookies);
if (!user || user.role !== 'admin') {
  return Astro.redirect('/login');
}

const adminSections = [
  {
    href: '/admin/peliculas',
    title: 'Manage Movies',
    description: 'Import movies from TMDB and manage the current schedule.',
  },
  {
    href: '/admin/categorias',
    title: 'Manage Show Categories',
    description:
      'Create and delete show categories (e.g. 2D, 3D) and their prices.',
  },
  {
    href: '/admin/salas',
    title: 'Manage Rooms',
    description:
      'Add or remove cinema rooms, defining their name and capacity.',
  },
  {
    href: '/admin/funciones',
    title: 'Manage Shows',
    description: 'Schedule new shows by assigning movie, room, and category.',
  },
  {
    href: '/admin/horarios',
    title: 'Manage Timetables',
    description: 'Add timetables to existing shows.',
  },
  {
    href: '/admin/usuarios',
    title: 'Manage Users',
    description: 'View the list of registered users in the system.',
  },
  {
    href: '/admin/tipos-tickets',
    title: 'Manage Ticket Types',
    description: 'Create and delete ticket types associated with shows.',
  },
];
---

<Layout title="Administration Panel - CineVerse">
  <main class="container" style="padding: 2rem;">
    <h1 style="color: black; font-size: 2.5rem; margin-bottom: 2rem;">
      Administration Panel
    </h1>
    <div
      style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;"
    >
      {
        adminSections.map((section) => (
          <a href={section.href} style="text-decoration: none; color: inherit;">
            <div style="background-color: #f0f0f0; padding: 1.5rem; border-radius: 8px; border: 1px solid #ddd; height: 100%;">
              <h2 style="color: #1a88c7; font-size: 1.5rem; margin-top: 0; margin-bottom: 0.5rem;">
                {section.title}
              </h2>
              <p style="color: #333; font-size: 1rem;">{section.description}</p>
            </div>
          </a>
        ))
      }
    </div>
  </main>
</Layout>
