---
import Layout from '../../layouts/Layout.astro';
import { getAuthenticatedUser } from '../../lib/auth';
import '../../styles/admin.css';

const user = getAuthenticatedUser(Astro.cookies);
if (!user || user.role !== 'admin') {
  return Astro.redirect('/login');
}

const adminSections = [
  {
    href: '/admin/peliculas',
    title: 'Manage Movies',
    description: 'Import movies from TMDB and manage the current schedule.',
  },
  {
    href: '/admin/categorias',
    title: 'Manage Show Categories',
    description:
      'Create and delete show categories (e.g. 2D, 3D) and their prices.',
  },
  {
    href: '/admin/salas',
    title: 'Manage Rooms',
    description:
      'Add or remove cinema rooms, defining their name and capacity.',
  },
  {
    href: '/admin/funciones',
    title: 'Manage Shows',
    description: 'Schedule new shows by assigning movie, room, and category.',
  },
  {
    href: '/admin/horarios',
    title: 'Manage Timetables',
    description: 'Add timetables to existing shows.',
  },
  {
    href: '/admin/usuarios',
    title: 'Manage Users',
    description: 'View the list of registered users in the system.',
  },
  {
    href: '/admin/tipos-tickets',
    title: 'Manage Ticket Types',
    description: 'Create and delete ticket types associated with shows.',
  },
];
---

<Layout title="Administration Panel - CineVerse">
  <main class="container admin-main">
    <h1 class="admin-h1">
      Administration Panel
    </h1>
    <div class="admin-grid">
      {
        adminSections.map((section) => (
          <a href={section.href} class="admin-card-link">
            <div class="admin-card">
              <h2>{section.title}</h2>
              <p>{section.description}</p>
            </div>
          </a>
        ))
      }
    </div>
  </main>
</Layout>
