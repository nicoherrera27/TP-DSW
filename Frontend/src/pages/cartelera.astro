---
import Layout from '../layouts/Layout.astro';
import Header from '@/components/Header.astro';
import { MovieGrid } from '../components/MovieGrid.tsx';
import { tmdbService } from '../services/tmdbService';
import '../styles/cartelera.css';

// Obtener películas en cartelera
const nowPlayingResponse = await tmdbService.getNowPlayingMovies();
const upcomingResponse = await tmdbService.getUpcomingMovies();

const nowPlayingMovies = nowPlayingResponse.results;
const upcomingMovies = upcomingResponse.results;
---

<Layout title="Cartelera - Showastro">
  <Header />
  <main class="cartelera">
    <div class="container">
      <header class="cartelera-header">
        <h1>Cartelera</h1>
        <div class="filters">
          <select class="filter-select">
            <option>Todas las películas</option>
            <option>Acción</option>
            <option>Comedia</option>
            <option>Drama</option>
            <option>Terror</option>
          </select>
          <select class="filter-select">
            <option>Todos los formatos</option>
            <option>2D</option>
            <option>3D</option>
          </select>
        </div>
      </header>

      <!-- En Cartelera -->
      <section class="movie-section">
        <h2>En Cartelera</h2>
        <MovieGrid movies={nowPlayingMovies} client:load />
      </section>

      <!-- Próximos Estrenos -->
      <section class="movie-section">
        <h2>Próximos Estrenos</h2>
        <MovieGrid movies={upcomingMovies} client:load />
      </section>
    </div>
  </main>
</Layout>

